<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />

  <title>File Converter | Bita Digital Hub</title>
  <meta name="description" content="Convert images and documents instantly — JPG ↔ PNG ↔ PDF." />

  <!-- Styles -->
  <link rel="stylesheet" href="/css/style.css" />
  <link rel="stylesheet" href="/css/components.css" />
  <link rel="stylesheet" href="/css/tools.css" />
  <link rel="stylesheet" href="/css/responsive.css" />
</head>

<body class="tools-page">

  <!-- HEADER -->
  <div id="header-placeholder"></div>
  <script>
    fetch("/components/header-tools.html")
      .then(res => res.text())
      .then(html => { document.getElementById("header-placeholder").innerHTML = html; });
  </script>


  <!-- TOOL WRAPPER -->
  <main class="tool-wrapper">

    <h1 class="tool-title">File Converter</h1>
    <p class="tool-description">
      Convert images and documents instantly — JPG ↔ PNG ↔ PDF.
    </p>

    <!-- TOOL CONTENT -->
    <div class="tool-content">

      <label class="tool-label">Upload a file</label>
      <input type="file" id="fileInput" class="tool-input" accept=".jpg,.jpeg,.png,.pdf" />

      <label class="tool-label" style="margin-top:1.3rem;">Convert to:</label>
      <select id="convertTo" class="tool-select">
        <option value="jpg">JPG</option>
        <option value="png">PNG</option>
        <option value="pdf">PDF</option>
      </select>

      <button id="convertBtn" class="tool-btn" style="margin-top:1.6rem;">
        Convert File
      </button>

      <div id="outputBox" class="output-box" style="display:none; margin-top:1.8rem;">
        <a id="downloadLink" href="#" download style="font-weight:600; color:#1e3a8a;">
          Download Converted File
        </a>
      </div>

    </div>

  </main>


  <!-- FOOTER -->
  <div id="footer-placeholder"></div>
  <script>
    fetch("/components/footer.html")
      .then(res => res.text())
      .then(html => { document.getElementById("footer-placeholder").innerHTML = html; });
  </script>


  <!-- JS LOGIC -->
  <script>
    document.getElementById("convertBtn").addEventListener("click", () => {
      const fileInput = document.getElementById("fileInput");
      const convertTo = document.getElementById("convertTo").value;

      if (!fileInput.files.length) {
        alert("Please upload a file first.");
        return;
      }

      const file = fileInput.files[0];
      const reader = new FileReader();

      reader.onload = function (e) {
        const link = document.getElementById("downloadLink");
        const outputBox = document.getElementById("outputBox");

        if (convertTo === "pdf") {
          link.href = e.target.result;
          link.download = file.name.replace(/\.[^/.]+$/, "") + ".pdf";
        } else if (convertTo === "png") {
          link.href = e.target.result;
          link.download = file.name.replace(/\.[^/.]+$/, "") + ".png";
        } else if (convertTo === "jpg") {
          link.href = e.target.result;
          link.download = file.name.replace(/\.[^/.]+$/, "") + ".jpg";
        }

        outputBox.style.display = "block";
      };

      reader.readAsDataURL(file);
    });
  </script>

</body>
</html>
